<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
  <h2 class="mb-0">
    <i class="bi bi-shield-lock me-2"></i>Adminbereich
  </h2>
  <div class="d-flex gap-2 flex-wrap">
    <a class="btn btn-outline-secondary btn-sm" href="/admin/dashboard">
      <i class="bi bi-speedometer2"></i> Dashboard
    </a>
    <a class="btn btn-outline-secondary btn-sm" href="/admin/categories">
      <i class="bi bi-grid"></i> Kategorien
    </a>
    <a class="btn btn-outline-secondary btn-sm" href="/admin/threads">
      <i class="bi bi-chat-dots"></i> Threads
    </a>
    <a class="btn btn-outline-secondary btn-sm" href="/admin/log">
      <i class="bi bi-clipboard-data"></i> Admin-Log
    </a>
  </div>
</div>

<h3 class="mb-3">Dashboard</h3>

<section class="mb-4">
  <h4>Ãœbersicht</h4>
  <p>User insgesamt: <strong><%= metrics.totalUsers %></strong></p>
  <p>Offene Meldungen: <strong><%= metrics.openReportsCount %></strong></p>
</section>

<section class="mb-4">
  <h4>Kategorien</h4>
  <table class="table table-sm">
    <thead>
      <tr>
        <th>Kategorie</th>
        <th>Threads</th>
        <th>Posts</th>
      </tr>
    </thead>
    <tbody>
      <% metrics.catStats.forEach(c => { %>
        <tr>
          <td><%= c.categoryName %></td>
          <td><%= c.threadCount %></td>
          <td><%= c.postCount %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</section>

<section class="mb-4">
  <h4>Gemeldete BeitrÃ¤ge (offen)</h4>
  <% if (reportedPostsSummary.length === 0) { %>
    <div class="text-muted">Keine offenen Meldungen ðŸŽ‰</div>
  <% } else { %>
    <div class="list-group">
      <% reportedPostsSummary.forEach(r => { %>
        <a class="list-group-item list-group-item-action" href="/admin/reports/<%= r.postId %>">
          <div class="d-flex justify-content-between">
            <div>
              <div class="small text-muted"><%= r.authorName %> Â· <%= r.reportCount %> Meldungen</div>
              <div class="fw-semibold"><%= r.threadTitle %></div>
              <div class="text-muted"><%= r.postExcerpt %></div>
              <div class="small text-muted">Letzter Grund: <%= r.lastReason %></div>
            </div>
            <span class="badge bg-danger align-self-start"><%= r.status %></span>
          </div>
        </a>
      <% }) %>
    </div>
  <% } %>
</section>

<section class="mb-4">
  <h4>Top aktive User</h4>
  <ol class="mb-0">
    <% topUsers.forEach(u => { %>
      <li><%= u.username %> â€“ <%= u.postCount %> Posts</li>
    <% }) %>
  </ol>
</section>
